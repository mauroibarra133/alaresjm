import{j as e,u as N,r as i,P as E,N as P}from"./index-d654d3f8.js";import{L as U}from"./LoaderComponent-d1f3c2e2.js";import{g as y,a as L}from"./productos.services-2d0fba84.js";import{u as w}from"./useCart-3430fc7e.js";import{g as p}from"./functions-63fd6aa2.js";import{M as Q}from"./Modal-75e303a2.js";function T({name:a,isActive:u,onClick:o}){function s(){o()}return e.jsx("div",{className:`menu__tag ${u?"active":""} `,onClick:s,children:e.jsx("p",{children:a})})}const b="data:image/webp;base64,UklGRlABAABXRUJQVlA4WAoAAAAQAAAAEwAAEwAAQUxQSPkAAAABkLpt2/n30q8Xs5WUF3es2U7eqtqSl+ytGs1mN3+2bdvmB8ciYgI41O3L525U4aTtl1SVzD3hEAM/d9U32WyuK1UOSt97sXfiuOWJvWd/QLHRhe3+DdA0n8NBWUoelYEi6b0bAlNJ2KcQEPh+ikCZaRrOA0iu1uKkTB050W3QjK5i7fw1yuBA0YfEdNPMqPa3ChD4Xnj97IXp86dfulGgKfjj7+jqaHR2ccUo8Lv56OyVx48fP35y5+yDBhQgcRz5s5uRnZWTUf7nazgSEAQ8bnkSA7A2vteDBiTBf9p+FOLkwNXZc5MmSPJvNSGQhB5b9kIYEJhLAAEAVlA4IDAAAAAQAwCdASoUABQAPulur1IpJiQiqAgBIB0JZwBTAAUJBMAA/vFM6/CmGpgAH8AAAAA=";function S({isProductInCart:a,removeProductFromCart:u,addToCart:o,product:s,setCartClick:n}){const{auth:l}=N();async function m(){if(l.isLogin)return n(!1),a?u(s,l.data.user_id):o(s,l.data.user_id);n(!0)}return e.jsxs("div",{className:"menu__item",children:[e.jsxs("div",{className:"menu__item-r1",children:[e.jsx("div",{className:"menu__name-price",children:e.jsx("p",{className:"menu__item-name",children:s.nombre.toString().toUpperCase()})}),e.jsxs("div",{className:"menu__prices",children:[e.jsx("div",{className:"menu__img",style:{backgroundColor:a?"#fb9999":"#E8E8E8"},onClick:()=>m(),children:e.jsx("img",{src:b,className:"menu__icono-cart",alt:"Carrito"})}),e.jsxs("div",{className:"menu__item-price",children:[e.jsxs("p",{className:`${s.preciochico?"":"inactive"}`,children:[" ",s.preciochico?"$"+s.preciochico:""," "]}),e.jsx("p",{className:`${s.preciogrande?"":"inactive"}`,children:`${s.preciogrande?"$"+s.preciogrande:""}`})]})]})]}),e.jsx("div",{className:"menu__item-r2",children:e.jsx("p",{className:"menu__item-desc",children:s.descripcion.toString().toUpperCase()})})]})}function I({products:a,checkProductInCart:u,removeProductFromCart:o,addToCart:s,categories:n,setCartClick:l}){const m=(A,d)=>A.filter(r=>r.id_categoria==d).map(r=>{const x=u(r);return e.jsx(S,{isProductInCart:x,removeProductFromCart:o,addToCart:s,product:r,setCartClick:l},p())}),h=(A,d)=>A.map((j,r)=>e.jsxs("div",{className:"menu-item__wrapper",children:[e.jsx("div",{className:"menu-item__title",children:e.jsx("h2",{children:j.nombre})}),e.jsx("div",{className:"menu-items__wrapper",children:m(d,r+1)})]},r));return e.jsx(e.Fragment,{children:h(n,a)})}function D(){const[a,u]=i.useState([]),[o,s]=i.useState([]),[n,l]=i.useState(null),[m,h]=i.useState(!1),[A,d]=i.useState(!1),[j,r]=i.useState(!0),{addToCart:x,checkProductInCart:v,removeProductFromCart:C}=w(),{auth:_}=N(),f=i.useRef(null);i.useEffect(()=>{document.title="Alares | Carta "},[]),i.useEffect(()=>{const t=new IntersectionObserver(g=>{g.forEach(c=>{c.intersectionRatio>.25?d(!1):d(!0)})},{threshold:.25});return f.current&&t.observe(f.current),document.body.style.overflow="auto",()=>{f.current&&t.unobserve(f.current)}},[]),i.useEffect(()=>{async function t(){y().then(c=>u(c)).catch(c=>console.log(c))}async function g(){L().then(c=>{r(!1),s(c)}).catch(c=>{console.log(c),r(!1)})}g(),t()},[]);function k(t){l(n===t?null:t)}function B(){return o.filter(t=>t.id_categoria==n)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"menu__container",children:j?e.jsx(U,{color:"orange"}):e.jsxs(e.Fragment,{children:[e.jsx(E,{pathPrev:"Home",pathActual:"Carta",goTo:"Home"}),e.jsx("div",{className:"menu__tags-container",children:e.jsx("div",{className:"menu__tags",children:a&&a.map(t=>e.jsx(T,{name:t.nombre,isActive:n===t.id,onClick:()=>k(t.id)},p()))})}),e.jsx("div",{className:"menu__title-sizes",children:e.jsx("p",{children:"Chicas / Grandes"})}),e.jsx("div",{className:`menu__menu ${n==null?"menu__menu--initial":""}`,children:n==null?e.jsx(I,{products:o,checkProductInCart:v,removeProductFromCart:C,addToCart:x,categories:a,setCartClick:h}):B().map(t=>{const g=v(t);return e.jsx(S,{isProductInCart:g,removeProductFromCart:C,addToCart:x,product:t,setCartClick:h},p())})}),A&&e.jsx(P,{to:"/delivery",children:e.jsxs("div",{className:"flotant-cart",children:[e.jsx("p",{children:"Carrito"}),e.jsx("img",{src:b,alt:"Carrito"})]})})]})}),e.jsx("div",{ref:f}),m&&!_.isLogin&&e.jsx(Q,{isSubmitted:m&&!_.isLogin,position:"top",handleSubmit:()=>h(!1),msg:_.isLogin?"":"Debes estar logueado para usar el carrito"})]})}export{D as default};
