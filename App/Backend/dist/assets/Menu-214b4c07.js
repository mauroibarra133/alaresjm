import{j as e,u as N,g as p,r as c,P,N as E}from"./index-4150fa67.js";import{L as U}from"./LoaderComponent-8ebaae1c.js";import{g as y,a as L}from"./productos.services-be12d028.js";import{u as w}from"./useCart-67f31302.js";import{M as Q}from"./Modal-ab20b0f4.js";function T({name:n,isActive:l,onClick:o}){function s(){o()}return e.jsx("div",{className:`menu__tag ${l?"active":""} `,onClick:s,children:e.jsx("p",{children:n})})}const b="data:image/webp;base64,UklGRlABAABXRUJQVlA4WAoAAAAQAAAAEwAAEwAAQUxQSPkAAAABkLpt2/n30q8Xs5WUF3es2U7eqtqSl+ytGs1mN3+2bdvmB8ciYgI41O3L525U4aTtl1SVzD3hEAM/d9U32WyuK1UOSt97sXfiuOWJvWd/QLHRhe3+DdA0n8NBWUoelYEi6b0bAlNJ2KcQEPh+ikCZaRrOA0iu1uKkTB050W3QjK5i7fw1yuBA0YfEdNPMqPa3ChD4Xnj97IXp86dfulGgKfjj7+jqaHR2ccUo8Lv56OyVx48fP35y5+yDBhQgcRz5s5uRnZWTUf7nazgSEAQ8bnkSA7A2vteDBiTBf9p+FOLkwNXZc5MmSPJvNSGQhB5b9kIYEJhLAAEAVlA4IDAAAAAQAwCdASoUABQAPulur1IpJiQiqAgBIB0JZwBTAAUJBMAA/vFM6/CmGpgAH8AAAAA=";function S({isProductInCart:n,removeProductFromCart:l,addToCart:o,product:s,setCartClick:a}){const{auth:m}=N();async function u(){if(m.isLogin)return a(!1),n?l(s):o(s);a(!0)}return e.jsxs("div",{className:"menu__item",children:[e.jsxs("div",{className:"menu__item-r1",children:[e.jsx("div",{className:"menu__name-price",children:e.jsx("p",{className:"menu__item-name",children:s.nombre.toString().toUpperCase()})}),e.jsxs("div",{className:"menu__prices",children:[e.jsx("div",{className:"menu__img",style:{backgroundColor:n?"#fb9999":"#E8E8E8"},onClick:()=>u(),children:e.jsx("img",{src:b,className:"menu__icono-cart",alt:"Carrito"})}),e.jsxs("div",{className:"menu__item-price",children:[e.jsxs("p",{className:`${s.preciochico?"":"inactive"}`,children:[" ",s.preciochico?"$"+s.preciochico:""," "]}),e.jsx("p",{className:`${s.preciogrande?"":"inactive"}`,children:`${s.preciogrande?"$"+s.preciogrande:""}`})]})]})]}),e.jsx("div",{className:"menu__item-r2",children:e.jsx("p",{className:"menu__item-desc",children:s.descripcion.toString().toUpperCase()})})]})}function I({products:n,checkProductInCart:l,removeProductFromCart:o,addToCart:s,categories:a,setCartClick:m}){const u=(A,d)=>A.filter(i=>i.id_categoria==d).map(i=>{const x=l(i);return e.jsx(S,{isProductInCart:x,removeProductFromCart:o,addToCart:s,product:i,setCartClick:m},p())}),h=(A,d)=>A.map((j,i)=>e.jsxs("div",{className:"menu-item__wrapper",children:[e.jsx("div",{className:"menu-item__title",children:e.jsx("h2",{children:j.nombre})}),e.jsx("div",{className:"menu-items__wrapper",children:u(d,i+1)})]},i));return e.jsx(e.Fragment,{children:h(a,n)})}function q(){const[n,l]=c.useState([]),[o,s]=c.useState([]),[a,m]=c.useState(null),[u,h]=c.useState(!1),[A,d]=c.useState(!1),[j,i]=c.useState(!0),{addToCart:x,checkProductInCart:v,removeProductFromCart:C}=w(),{auth:_}=N(),f=c.useRef(null);c.useEffect(()=>{const t=new IntersectionObserver(g=>{g.forEach(r=>{r.intersectionRatio>.25?d(!1):d(!0)})},{threshold:.25});return f.current&&t.observe(f.current),document.body.style.overflow="auto",()=>{f.current&&t.unobserve(f.current)}},[]),c.useEffect(()=>{async function t(){y().then(r=>l(r)).catch(r=>console.log(r))}async function g(){L().then(r=>{i(!1),s(r)}).catch(r=>{console.log(r),i(!1)})}g(),t()},[]);function k(t){m(a===t?null:t)}function B(){return o.filter(t=>t.id_categoria==a)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"menu__container",children:j?e.jsx(U,{color:"orange"}):e.jsxs(e.Fragment,{children:[e.jsx(P,{pathPrev:"Home",pathActual:"Carta",goTo:"Home"}),e.jsx("div",{className:"menu__tags-container",children:e.jsx("div",{className:"menu__tags",children:n&&n.map(t=>e.jsx(T,{name:t.nombre,isActive:a===t.id,onClick:()=>k(t.id)},p()))})}),e.jsx("div",{className:"menu__title-sizes",children:e.jsx("p",{children:"Chicas / Grandes"})}),e.jsx("div",{className:`menu__menu ${a==null?"menu__menu--initial":""}`,children:a==null?e.jsx(I,{products:o,checkProductInCart:v,removeProductFromCart:C,addToCart:x,categories:n,setCartClick:h}):B().map(t=>{const g=v(t);return e.jsx(S,{isProductInCart:g,removeProductFromCart:C,addToCart:x,product:t,setCartClick:h},p())})}),A&&e.jsx(E,{to:"/delivery",children:e.jsxs("div",{className:"flotant-cart",children:[e.jsx("p",{children:"Carrito"}),e.jsx("img",{src:b,alt:"Carrito"})]})})]})}),e.jsx("div",{ref:f}),u&&!_.isLogin&&e.jsx(Q,{isSubmitted:u&&!_.isLogin,position:"top",handleSubmit:()=>h(!1),msg:_.isLogin?"":"Debes estar logueado para usar el carrito"})]})}export{q as default};
