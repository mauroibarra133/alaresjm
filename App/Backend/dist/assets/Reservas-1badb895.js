import{r as o,c as T,u as E,b as R,j as e,P as w,i as F}from"./index-d654d3f8.js";import{M as z}from"./Modal-75e303a2.js";import{a as A}from"./reservas.services-b5165cfe.js";import{v as G,a as I,b as L,c as M}from"./functions-63fd6aa2.js";function O(){var m,h,u,x,p,v,j,f;o.useEffect(()=>{document.title="Alares | Reservas "},[]);const N=T(),c=o.useId(),l=o.useId(),i=o.useId(),{auth:_}=E(),{register:a,handleSubmit:S,formState:g}=R({mode:"onBlur"}),{errors:s}=g,[t,n]=o.useState({isSubmitted:!1,isGood:!1,msg:""});function y(){t.isGood&&(n({isSubmitted:!1,isGood:!1,msg:""}),N("/mis-reservas")),n({isSubmitted:!1,isGood:!1,msg:""})}function d(r,b="Tu reserva no se ha podido confirmar.Intente mas tarde"){n({isSubmitted:!0,isGood:r,msg:r==!0?"Tu reserva se ha registrado correctamente":b})}async function q(r){if(!M(r.hora,r.fecha)){d(!1,"La hora ingresada es antigua");return}try{await A(r.fecha,r.hora,_.data.user_id,r.comensales,r.zona,r.cliente),d(!0)}catch{d(!1)}}return e.jsxs("div",{className:"reservas__container",children:[e.jsx(w,{pathPrev:"Home",pathActual:"Reservas",goTo:"Home"}),e.jsx("div",{className:"reservas__title",children:e.jsx("h2",{children:"RESERVAS"})}),e.jsx("div",{className:"reservas__form-wrapper",children:e.jsxs("form",{className:"reservas__form",onSubmit:S(q),children:[e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Fecha"}),e.jsx("input",{type:"date",...a("fecha",{required:!0,validate:G})})]}),((m=s.fecha)==null?void 0:m.type)==="required"&&e.jsx("p",{role:"alert",className:"form-error",children:"La fecha es requerida."}),((h=s.fecha)==null?void 0:h.type)==="validate"&&e.jsx("p",{role:"alert",className:"form-error",children:"La fecha es pasada."})]}),e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Hora"}),e.jsx("input",{type:"time",...a("hora",{required:!0,validate:I})})]}),((u=s.hora)==null?void 0:u.type)==="required"&&e.jsx("p",{role:"alert",className:"form-error",children:"La hora es requerida."}),((x=s.hora)==null?void 0:x.type)==="validate"&&e.jsx("p",{role:"alert",className:"form-error",children:"Debe ser entre las 19:00hs y 23:00hs."})]}),e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:c,children:"Numero de comensales"}),e.jsx("input",{type:"number",id:c,...a("comensales",{required:!0,validate:L})})]}),((p=s.comensales)==null?void 0:p.type)==="required"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{role:"alert",className:"form-error",children:"La cantidad de comensales"}),e.jsxs("p",{role:"alert",className:"form-error",children:[" ","es requerida."]})]}),((v=s.comensales)==null?void 0:v.type)==="validate"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{role:"alert",className:"form-error",children:s.comensales.message}),e.jsx("p",{role:"alert",className:"form-error"})]})]}),e.jsx("div",{className:"reservas__row",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:l,children:"Zona a reservar"}),e.jsxs("select",{name:l,id:l,...a("zona",{required:!0}),children:[e.jsx("option",{value:"Terraza",children:"Terraza"}),e.jsx("option",{value:"Terraza Norte",children:"Terraza Norte"}),e.jsx("option",{value:"Salon",children:"Salon"}),e.jsx("option",{value:"Patio",children:"Patio"})]})]})}),e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:i,children:"A nombre de"}),e.jsx("input",{type:"text",name:i,id:i,...a("cliente",{required:!0,pattern:F})})]}),((j=s.cliente)==null?void 0:j.type)==="required"&&e.jsx("p",{role:"alert",className:"form-error",children:"El nombre es requerido"}),((f=s.cliente)==null?void 0:f.type)==="pattern"&&e.jsx("p",{role:"alert",className:"form-error",children:"El nombre solo debe incluir letras"})]}),e.jsx("div",{className:"button__wrapper",children:e.jsx("button",{className:"button",type:"submit",children:"RESERVAR"})})]})}),t.isSubmitted&&e.jsx(z,{isSubmitted:t.isSubmitted,isGoodStatus:t.isGood,handleSubmit:y,msg:t.msg})]})}export{O as default};
