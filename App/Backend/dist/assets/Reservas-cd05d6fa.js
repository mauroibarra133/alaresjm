import{e as q,r as t,u as w,b as E,j as e,P as R,v as T,o as F,k as z,p as I}from"./index-3c96dc83.js";import{M as L}from"./Modal-64590138.js";import{a as M}from"./reservas.services-28cb91ce.js";function H(){var h,u,x,p,v,j,f;const b=q(),c=t.useId(),l=t.useId(),i=t.useId(),{auth:N}=w(),{register:a,handleSubmit:_,formState:S}=E({mode:"onBlur"}),{errors:s}=S,[n,m]=t.useState({isSubmitted:!1,isGood:!1,msg:""});function g(){m({isSubmitted:!1,isGood:!1,msg:""}),b("/")}function d(r,o="Tu reserva no se ha podido confirmar.Intente mas tarde"){m({isSubmitted:!0,isGood:r,msg:r==!0?"Tu reserva se ha registrado correctamente":o})}async function y(r){if(console.log(r),!I(r.hora,r.fecha)){d(!1,"La hora ingresada es antigua");return}try{const o=await M(r.fecha,r.hora,N.data.user_id,r.comensales,r.zona,r.cliente);console.log(o),d(!0)}catch{d(!1)}}return e.jsxs("div",{className:"reservas__container",children:[e.jsx(R,{pathPrev:"Home",pathActual:"Reservas",goTo:"Home"}),e.jsx("div",{className:"reservas__title",children:e.jsx("h2",{children:"RESERVAS"})}),e.jsx("div",{className:"reservas__form-wrapper",children:e.jsxs("form",{className:"reservas__form",onSubmit:_(y),children:[e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Fecha"}),e.jsx("input",{type:"date",...a("fecha",{required:!0,validate:T})})]}),((h=s.fecha)==null?void 0:h.type)==="required"&&e.jsx("p",{role:"alert",className:"form-error",children:"La fecha es requerida."}),((u=s.fecha)==null?void 0:u.type)==="validate"&&e.jsx("p",{role:"alert",className:"form-error",children:"La fecha es pasada."})]}),e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",children:"Hora"}),e.jsx("input",{type:"time",...a("hora",{required:!0,validate:F})})]}),((x=s.hora)==null?void 0:x.type)==="required"&&e.jsx("p",{role:"alert",className:"form-error",children:"La hora es requerida."}),((p=s.hora)==null?void 0:p.type)==="validate"&&e.jsx("p",{role:"alert",className:"form-error",children:"Debe ser entre las 19:00hs y 23:00hs."})]}),e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:c,children:"Numero de comensales"}),e.jsx("input",{type:"number",id:c,...a("comensales",{required:!0})})]}),((v=s.comensales)==null?void 0:v.type)==="required"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{role:"alert",className:"form-error",children:"La cantidad de comensales"}),e.jsx("p",{role:"alert",className:"form-error",children:" es requerida."})]})]}),e.jsx("div",{className:"reservas__row",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:l,children:"Zona a reservar"}),e.jsxs("select",{name:l,id:l,...a("zona",{required:!0}),children:[e.jsx("option",{value:"Terraza",children:"Terraza"}),e.jsx("option",{value:"Terraza Norte",children:"Terraza Norte"}),e.jsx("option",{value:"Salon",children:"Salon"}),e.jsx("option",{value:"Patio",children:"Patio"})]})]})}),e.jsxs("div",{className:"reservas__row",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:i,children:"A nombre de"}),e.jsx("input",{type:"text",name:i,id:i,...a("cliente",{required:!0,pattern:z})})]}),((j=s.cliente)==null?void 0:j.type)==="required"&&e.jsx("p",{role:"alert",className:"form-error",children:"El nombre es requerido"}),((f=s.cliente)==null?void 0:f.type)==="pattern"&&e.jsx("p",{role:"alert",className:"form-error",children:"El nombre solo debe incluir letras"})]}),e.jsx("div",{className:"button__wrapper",children:e.jsx("button",{className:"button",type:"submit",children:"RESERVAR"})})]})}),e.jsx(L,{isSubmitted:n.isSubmitted,isGoodStatus:n.isGood,handleSubmit:g,msg:n.msg})]})}export{H as default};
